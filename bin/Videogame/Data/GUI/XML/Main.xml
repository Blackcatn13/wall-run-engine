<?xml version="1.0" encoding="ISO-8859-1"?>
<Windows OnLoadWindows="if first_time_main_menu then
							--CCoreLuaWrapper().m_CoreInstance:getWWSoundManager():PlayEvent('Menu','Music');
							first_time_main_menu = false
						end
						if inputm:has_game_pad(1) then
							gui_manager:set_visible_gui_element('MenuHelp',true)
						else
							gui_manager:set_visible_gui_element('MenuHelp',false)
						end
						
						CCoreLuaWrapper().m_CoreInstance:get_scene_render_commands_manager().currentRenderer = 'normal_render';
						local Piky = renderable_objects_layer_manager:get_renderable_objects_manager_by_str_and_room('player', player_controller.m_Room):get_resource('Piky');
						Piky:clear_cycle(0,0);
						Piky:clear_cycle(1,0);
						Piky:clear_cycle(3,0);
						Piky:clear_cycle(4,0);
						Piky:clear_cycle(12,0);
						Piky:clear_cycle(13,0);
						Piky:remove_action(2);
						Piky:remove_action(10);
						Piky:remove_action(11);
						set_screen_menu(Vect3f(-922.25, -1, 4.5), 10);
						gui_manager:set_is_mainmenu(false);
						gui_manager:set_is_gameover(false);
						gui_manager:set_is_paused(false);
						gui_manager:set_is_displayed_console(false);
						enemy_manager:get_enemy('Chucky'):m_FSM():newState('Parado');"
        OnSaveWindows=""
        OnUpdateWindows="cam_Controller:set_active_camera('GUICamera')
						local enemy = enemy_manager:get_enemy('Chucky')
						local ball = renderable_objects_layer_manager:get_renderable_objects_manager_by_str_and_room('solid', 10):get_resource('MenuSphere');
						ball:set_pitch(ball:get_pitch() - (gui_manager:get_dt() / 2));
						renderable_objects_layer_manager:get_renderable_objects_manager_by_str_and_room('player', 10):get_resource('Piky'):blend_cycle(1,1,0.5);
						if enemy.m_RenderableObject:is_action_animation_active() then
							enemy.m_RenderableObject:remove_action(3)
						end
						enemy_manager:get_enemy('Chucky').m_RenderableObject:blend_cycle(1,1,0.5)
						enemy_manager:get_enemy('Chucky'):move_to_position(Vect3f(-920.75, -1, 0));">
	
	<Image name="background" posx="0.00" posy="0.00" height="100.00" width="100.00" visible="false" active="true" default="img1" OnLoadValue="" OnSaveValue="" flip="" backGround="true">
		<texture name="img1" name_texture="./Data/GUI/GoPixelGo/MenuMain2.jpg"/>
	</Image>
		
	<Image name="buttonsBackground" posx="0.00" posy="0.00" height="100.00" width="100.00" visible="true" active="true" default="img1" OnLoadValue="" OnSaveValue="" flip="" backGround="false">
		<texture name="img1" name_texture="./Data/GUI/GoPixelGo/GUI_MENU.png"/>
	</Image>
	
	<Image name="logo" posx="61.00" posy="10.00" height="20.00" width="30.00" visible="false" active="true" default="img1" OnLoadValue="" OnSaveValue="" flip="" backGround="false">
		<texture name="img1" name_texture="./Data/GUI/GoPixelGo/GameLogo.png"/>
	</Image>
	
     <ButtonList name="ButtonList" posx="60.00" posy="5.0" height="90.0" width="22.0" visible="true" active="true">
          <Buttons>
          	<Button name="Play" posx="71.00" posy="20.50" height="13.00" width="20.00" visible="true" 
                    active="true" texture_normal="./Data/GUI/GoPixelGo/Button_1_A.png"
                    texture_over="./Data/GUI/GoPixelGo/Button_1_B.png"
                    texture_clicked="./Data/GUI/GoPixelGo/Button_1_C.png"
                    texture_deactivated="./Data/GUI/GoPixelGo/Button_1_A.png"
                    OnClickedAction="CCoreLuaWrapper().m_CoreInstance:getWWSoundManager():PlayEvent('MenuClick','Music');
          							CCoreLuaWrapper().m_CoreInstance:getGUIManager():push_windows('Play.xml');
									if player.game_over == true then
          								reset_cameras()
          								player.game_over = false
										set_visible_gui_elements(true)
									else
										set_visible_gui_elements(false)
          							end
									
									gui_manager:set_is_mainmenu(false);
									init_level(1);"
                    OnOverAction="CCoreLuaWrapper().m_CoreInstance:getWWSoundManager():PlayEvent('MenuOver','Music');"/>
          		  
          	<Button name="Options" posx="71.00" posy="34.00" height="13.00" width="20.00" visible="true" 
                    active="true" texture_normal="./Data/GUI/GoPixelGo/Button_2_A.png"
                    texture_over="./Data/GUI/GoPixelGo/Button_2_B.png"
                    texture_clicked="./Data/GUI/GoPixelGo/Button_2_C.png"
                    texture_deactivated="./Data/GUI/GoPixelGo/Button_2_A.png"
                    OnClickedAction="CCoreLuaWrapper().m_CoreInstance:getWWSoundManager():PlayEvent('MenuClick','Music');
					 CCoreLuaWrapper().m_CoreInstance:getGUIManager():push_windows('KeyButtonMap.xml')"
                    OnOverAction="CCoreLuaWrapper().m_CoreInstance:getWWSoundManager():PlayEvent('MenuOver','Music');"
					/>
          		  
          	<Button name="Extras" posx="71.00" posy="47.50" height="13.00" width="20.00" visible="true" 
                    active="true" texture_normal="./Data/GUI/GoPixelGo/Button_3_A.png"
                    texture_over="./Data/GUI/GoPixelGo/Button_3_B.png"
                    texture_clicked="./Data/GUI/GoPixelGo/Button_3_C.png"
                    texture_deactivated="./Data/GUI/GoPixelGo/Button_3_A.png"
                    OnClickedAction=" CCoreLuaWrapper().m_CoreInstance:getGUIManager():push_windows('Collectibles.xml')
          			CCoreLuaWrapper().m_CoreInstance:getWWSoundManager():PlayEvent('MenuClick','Music');"
                    OnOverAction="CCoreLuaWrapper().m_CoreInstance:getWWSoundManager():PlayEvent('MenuOver','Music');"/>
					
			<Button name="Credits" posx="71.00" posy="61.00" height="13.00" width="20.00" visible="true" 
                    active="true" texture_normal="./Data/GUI/GoPixelGo/Button_5_A.png"
                    texture_over="./Data/GUI/GoPixelGo/Button_5_B.png"
                    texture_clicked="./Data/GUI/GoPixelGo/Button_5_C.png"
                    texture_deactivated="./Data/GUI/GoPixelGo/Button_5_A.png"
                    OnClickedAction=" CCoreLuaWrapper().m_CoreInstance:getWWSoundManager():PlayEvent('MenuClick','Music');"
                    OnOverAction="CCoreLuaWrapper().m_CoreInstance:getWWSoundManager():PlayEvent('MenuOver','Music');"/>
					
			<Button name="Exit" posx="71.00" posy="74.50" height="13.00" width="20.00" visible="true" 
                    active="true" texture_normal="./Data/GUI/GoPixelGo/Button_4_A.png"
                    texture_over="./Data/GUI/GoPixelGo/Button_4_B.png"
                    texture_clicked="./Data/GUI/GoPixelGo/Button_4_C.png"
                    texture_deactivated="./Data/GUI/GoPixelGo/Button_4_A.png"
                    OnClickedAction=" CCoreLuaWrapper().m_CoreInstance:getWWSoundManager():PlayEvent('MenuClick','Music');
          							CCoreLuaWrapper().m_CoreInstance:exit_game()"
                    OnOverAction="CCoreLuaWrapper().m_CoreInstance:getWWSoundManager():PlayEvent('MenuOver','Music');"/>
          </Buttons>
     </ButtonList>
	 
	 <Image name="MenuHelp" posx="68.00" posy="85.00" height="10.00" width="25.00" visible="false" active="true" default="menuHelp" OnLoadValue="" OnSaveValue="" flip="" backGround="false">
		<texture name="menuHelp" name_texture="./Data/GUI/GoPixelGo/Menu_help.png"/>
	</Image>

</Windows>
